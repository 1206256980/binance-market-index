# 服务器配置
server.port=8080

# H2 数据库配置 (文件模式，数据持久化)
spring.datasource.url=jdbc:h2:file:./data/market-index;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# HikariCP 连接池配置
spring.datasource.hikari.maximum-pool-size=50
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
# 禁用泄漏检测（uptrend-distribution 等长查询会误触发，设为0表示禁用）
spring.datasource.hikari.leak-detection-threshold=0

# 事务超时（秒）- 防止单个事务无限占用连接
spring.transaction.default-timeout=300

# JPA 配置
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# H2 Console (开发调试用)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# 日志配置
logging.level.com.binance=DEBUG
logging.level.org.springframework.web=INFO

# 币安API配置
binance.api.base-url=https://fapi.binance.com
# API请求间隔（毫秒）- 用于 BinanceApiService 中批量请求时的请求间隔控制
binance.api.request-interval-ms=40
# HTTP客户端并发线程数 - 用于 HttpClientConfig 配置 HTTP 连接池的最大并发数
binance.api.concurrent-threads=10
# V2 回补并发数（建议 5-10，过高会触发限流）- 用于 DataCollectorScheduler 控制历史数据回补的并发任务数
binance.api.backfill-concurrency=1

# 指数计算配置
index.backfill.days=90
index.collect.interval-minutes=5
index.exclude-symbols=BTCUSDT,ETHUSDT,PAXGUSDT,BNBUSDT

# ========== 邮件通知配置 ==========
# 是否启用邮件通知（设为false可禁用）
notification.email.enabled=true

# 邮件服务器配置 (以QQ邮箱为例，其他邮箱请修改host和port)
# QQ邮箱: smtp.qq.com:465
# 163邮箱: smtp.163.com:465
# Gmail: smtp.gmail.com:587
spring.mail.host=smtp.qq.com
spring.mail.port=465
spring.mail.username=1206256980@qq.com
spring.mail.password=tuenjpvwychvgibe
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.properties.mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory

# 通知收件人（可以和发件人相同）
notification.email.to=1206256980@qq.com
# 邮件主题前缀（使用Unicode编码避免乱码）
# ========== 监控与预警配置 ==========
# 内存使用率报警阈值 (0.1-1.0)
monitoring.memory.threshold=0.95
# 报警邮件发送最小间隔（分钟，防止刷屏）
monitoring.memory.alert-interval-minutes=30
