# 服务器配置
server.port=8080

# H2 数据库配置 (文件模式，数据持久化)
spring.datasource.url=jdbc:h2:file:./data/market-index;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# HikariCP 连接池配置
spring.datasource.hikari.maximum-pool-size=50
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
# 禁用泄漏检测（uptrend-distribution 等长查询会误触发）
spring.datasource.hikari.leak-detection-threshold=0

# 事务超时（秒）- 防止单个事务无限占用连接
spring.transaction.default-timeout=300

# JPA 配置
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# H2 Console (开发调试用)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# 日志配置
logging.level.com.binance=DEBUG
logging.level.org.springframework.web=INFO

# 币安API配置
binance.api.base-url=https://fapi.binance.com
binance.api.request-interval-ms=80
binance.api.concurrent-threads=10
# V2 回补并发数（建议 5-10，过高会触发限流）
binance.api.backfill-concurrency=1

# 指数计算配置
index.backfill.days=30
index.collect.interval-minutes=5
index.exclude-symbols=BTCUSDT,ETHUSDT,PAXGUSDT,BNBUSDT
